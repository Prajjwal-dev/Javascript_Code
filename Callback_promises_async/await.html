<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Callbacks, Promises, and Async/Await</title>
    <link rel="icon" href="favicon.ico">
</head>
<body>
    <h1>Understanding Callbacks, Promises, and Async/Await</h1>
    <p>Open the console to see the output.</p>

    <script>
        // Simulate an asynchronous task like fetching data
        const fetchData = (callback) => {
            console.log("Fetching data (Callback)...");

            setTimeout(() => {
                const data = { id: 1, name: "John Doe", age: 30 };
                callback(null, data);
            }, 2000);
        };

        // Example 1: Using Callback
        function handleWithCallback() {
            fetchData((error, data) => {
                if (error) {
                    console.error("Error occurred:", error);
                } else {
                    console.log("Callback: Data received:", data);
                }
            });
        }

        // Example 2: Using Promises
        const fetchDataWithPromise = () => {
            console.log("Fetching data (Promise)...");

            return new Promise((resolve, reject) => {
                setTimeout(() => {
                    const data = { id: 2, name: "Jane Doe", age: 25 };
                    resolve(data); // Resolve with data
                    // reject("Failed to fetch data."); // Uncomment this to test rejection
                }, 2000);
            });
        };

        function handleWithPromise() {
            fetchDataWithPromise()
                .then(data => {
                    console.log("Promise: Data received:", data);
                })
                .catch(error => {
                    console.error("Promise: Error occurred:", error);
                });
        }

        // Example 3: Using Async/Await
        const fetchDataWithAsync = async () => {
            console.log("Fetching data (Async/Await)...");

            return new Promise((resolve, reject) => {
                setTimeout(() => {
                    const data = { id: 3, name: "Sam Smith", age: 20 };
                    resolve(data); // Resolve with data
                    // reject("Failed to fetch data."); // Uncomment this to test rejection
                }, 2000);
            });
        };

        async function handleWithAsyncAwait() {
            try {
                const data = await fetchDataWithAsync();
                console.log("Async/Await: Data received:", data);
            } catch (error) {
                console.error("Async/Await: Error occurred:", error);
            }
        }

        // Execute the examples
        console.log("Starting examples...\n");

        console.log("--- Example 1: Callback ---");
        handleWithCallback();

        setTimeout(() => {
            console.log("\n--- Example 2: Promise ---");
            handleWithPromise();
        }, 3000);

        setTimeout(() => {
            console.log("\n--- Example 3: Async/Await ---");
            handleWithAsyncAwait();
        }, 6000);
    </script>
</body>
</html>
